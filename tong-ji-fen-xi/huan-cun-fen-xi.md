# 缓存分析

此页面从性能角度对网站的请求和流量进行了深入的分析。如果您的网站访问速度较慢，这里是分析原因、配置缓存策略、观察缓存效果的首选之地。

<figure><img src="../.gitbook/assets/image (12).png" alt=""><figcaption></figcaption></figure>

### 请求数 VS 流量

支持按请求数和按流量进行分析。您可以按需选择不同的分析方式。

* 请求数：\
  此方式可以让您很容易发现那些占比较大的请求，针对这类请求进行重点优化，可以起到事半功倍的效果。
* 流量：\
  对于某些请求，虽然请求数量不多，但流量占比非常大，比如非常大的图片、音频、视频等内容。按“流量”的方式可以轻易找出这类请求。对这类请求进行优化，也可以提升用户体验。

### 时间选择

不同的时间段，决定了统计范围和时间精度。

* 实时：\
  展示最近1小时内，每分钟的数据
* 最近6小时：\
  展示最近6小时内，每15分钟的数据
* 最近12小时：\
  展示了最近12小时内，每30分钟的数据
* 最近24小时：\
  展示了最近24小时内，每小时的数据
* 最近72小时：\
  展示了最近72小时内，每天的数据
* 最近7天：\
  展示了最近7天内，每天的数据
* 最近30天：\
  展示了最近30天内，每天的数据

### 事件摘要

包含7个图表，从7个纬度对网站请求进行分析统计。

* 服务提供者：\
  展示访客的请求是由谁处理和响应的。对于命中缓存的请求，显示为“01dun节点”。对于需要回源的请求，显示为“源站服务器”。这是衡量缓存效果的常用图表。
* 缓存状态：\
  展示了缓存的状态，可能的取值包括：MISS、BYPASS、EXPIRED、STALE、UPDATING、HIT、REVALIDATED、Others

{% hint style="info" %}
这些状态的含义是什么？

* MISS：表示请求的内容在缓存中不存在，如果此状态较多，说明缓存配置不合理。
* BYPASS：表示请求被配置为绕过缓存或者01dun认为这个请求不适合被缓存。如果此状态包含较多可以被缓存的请求，可以增加缓存策略。
* EXPIRED：表示缓存找到但已过期，01dun已经联系源站服务器更新了缓存
* STALE：表示缓存找到但已过期，01dun无法联系源站服务器更新缓存，只好提供了过期的缓存资源。（可以通过“缓存-配置-启用永远在线”进行控制）
* UPDATING：表示缓存找到但已过期，01dun正在联系源站服务器更新缓存，同时提供了过期的缓存资源。（可以通过“缓存-配置-**后台异步更新缓存**”进行控制）
* HIT：表示请求的内容在缓存中存在，并且缓存是有效的，01dun直接从缓存中提供响应。
* REVALIDATED：表示缓存过期了，但是01dun已经向源站服务器重新验证过，目前缓存仍然是有效的。
* Others：除上述状态之外的其它不常见的情况，比如01dun的5秒盾、各类错误页面等。
{% endhint %}

* 国家/地区：\
  展示了排名靠前的10个国家/地区的访问情况。可以为访问频繁的国家/地区单独设置访问策略和缓存策略。
* 主机：\
  展示了每个主机名的访问情况。用来评估哪些主机名需要重点优化。
* HTTP方法：\
  展示了每个HTTP方法的访问情况。
* 路径：\
  展示了排名靠前的10个url的访问情况，用来评估这些url是否需要被缓存起来。
* 内容类型：\
  根据请求的url的扩展名进行排名分析。用于衡量不同类别的文件的缓存效果，比如图片类、CSS或JS。

### 排名靠前的请求

包含7个卡片，展示了7个纬度的访问排名。可以按需查看前3到前30个项目。取决于您的版本。并且可以按照请求数和请求流量查看。

* 内容类型：\
  统计排名靠前的url的扩展名，用于分析哪类文件访问最为频繁或占用流量较大。
* 路径：\
  统计排名靠前的uri路径，用于分析哪些url访问最为频繁或占用流量较大
* 主机：\
  统计排名靠前的主机名。
* 国家/地区：\
  统计排名靠前的国家/地区
* 缓存状态：\
  统计不同的缓存状态下的请求数和流量。用于评估缓存策略的整体效果
* HTTP方法：\
  统计排名靠前的HTTP方法。
* 服务提供者：\
  统计01dun的节点和源站服务器分别处理了多少请求和流量。01dun的节点占比越高，说明01dun节点为您分担的压力越高。

